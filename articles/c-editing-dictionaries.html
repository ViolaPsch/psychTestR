<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tutorial (intermediate): Editing dictionaries • psychTestR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Tutorial (intermediate): Editing dictionaries">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">psychTestR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.16.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a-introduction.html">An introduction to psychTestR</a>
    </li>
    <li>
      <a href="../articles/b-media-files.html">Tutorial (basic): Media files</a>
    </li>
    <li>
      <a href="../articles/c-editing-dictionaries.html">Tutorial (intermediate): Editing dictionaries</a>
    </li>
    <li>
      <a href="../articles/c-hosting-experiments-online.html">Tutorial (intermediate): Hosting experiments online</a>
    </li>
    <li>
      <a href="../articles/c-randomisation.html">Tutorial (intermediate): Randomising item administration</a>
    </li>
    <li>
      <a href="../articles/c-url-parameters.html">Tutorial (intermediate): URL parameters</a>
    </li>
    <li>
      <a href="../articles/d-internationalised-questionnaire.html">Tutorial (expert): Creating an internationalised questionnaire</a>
    </li>
    <li>
      <a href="../articles/d-jspsych-integration.html">Tutorial (expert): jsPsych integration</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/pmcharrison/psychTestR">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Tutorial (intermediate): Editing dictionaries</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pmcharrison/psychTestR/blob/master/vignettes/c-editing-dictionaries.Rmd"><code>vignettes/c-editing-dictionaries.Rmd</code></a></small>
      <div class="hidden name"><code>c-editing-dictionaries.Rmd</code></div>

    </div>

    
    
<div id="about" class="section level2">
<h2 class="hasAnchor">
<a href="#about" class="anchor"></a>About</h2>
<p>Imagine that you’re using an open-source psychTestR test that has been created by another researcher, and you spot a typo in one of the test items. If this typo is hard-coded into the test implementation, then you’ll have to edit their code to fix it. However, if the typo is instead part of their internationalisation dictionary (see <a href="https://pmcharrison.github.io/psychTestR/reference/i18n_dict.html"><code>i18n_dict</code></a>), then you can fix the typo without editing their code, instead adding some code of your own when you call the test. This tutorial demonstrates this functionality.</p>
</div>
<div id="instructions" class="section level2">
<h2 class="hasAnchor">
<a href="#instructions" class="anchor"></a>Instructions</h2>
<p>Let’s begin by making a simple test with a typo.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># Load the psychTestR package</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(psychTestR)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># Define a dictionary with a typo</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">my_dict &lt;-<span class="st"> </span>i18n_dict<span class="op">$</span><span class="kw">new</span>(<span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">key =</span> <span class="st">"key1"</span>,</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">                                    <span class="dt">EN =</span> <span class="st">"Welcoom to the test!"</span>))</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co"># The test itself is distributed as a function,</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co"># which might itself be distributed as a package</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">my_test &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">dict =</span> my_dict) {</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">  <span class="kw"><a href="../reference/make_test.html">make_test</a></span>(<span class="kw"><a href="../reference/new_timeline.html">new_timeline</a></span>(</a>
<a class="sourceLine" id="cb1-12" data-line-number="12">    <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw"><a href="../reference/final_page.html">final_page</a></span>(<span class="kw"><a href="../reference/i18n.html">i18n</a></span>(<span class="st">"key1"</span>))),</a>
<a class="sourceLine" id="cb1-13" data-line-number="13">    <span class="dt">dict =</span> dict</a>
<a class="sourceLine" id="cb1-14" data-line-number="14">  ))</a>
<a class="sourceLine" id="cb1-15" data-line-number="15">}</a></code></pre></div>
<p>If we run this test, we see the typo.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">my_test</span>()</a></code></pre></div>
<p>To fix this problem, we begin by inspecting the dictionary object to find out which component we need to change. In real-life applications, this dictionary object should be exported from the package distributing your test, and you should be able to find it by inspecting the documentation. We can inspect the dictionary using the <code>as.data.frame</code> method.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">my_dict<span class="op">$</span><span class="kw"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>()</a></code></pre></div>
<pre><code>##    key                   EN
## 1 key1 Welcoom to the test!</code></pre>
<p>Inspecting this dictionary shows us that we want to edit the entry with key <code>key1</code> and language code <code>EN</code>. We can do this as follows:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">my_dict<span class="op">$</span><span class="kw"><a href="https://rdrr.io/r/utils/edit.html">edit</a></span>(<span class="dt">key =</span> <span class="st">"key1"</span>,</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">             <span class="dt">language =</span> <span class="st">"EN"</span>,</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">             <span class="dt">new =</span> <span class="st">"Welcome to the test!"</span>)</a></code></pre></div>
<p>Unlike most R functions, this <code>edit</code> function is <em>destructive</em>: it updates the original object, even without an assignment operator. So, if we inspect our <code>my_dict</code> object, we see that it has now changed:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">my_dict<span class="op">$</span><span class="kw"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>()</a></code></pre></div>
<pre><code>##    key                   EN
## 1 key1 Welcome to the test!</code></pre>
</div>
<div id="real-life-example" class="section level2">
<h2 class="hasAnchor">
<a href="#real-life-example" class="anchor"></a>Real-life example</h2>
<p>To make this more concrete, here’s a real-life example. Let’s install the melody discrimination test of <a href="https://github.com/pmcharrison/mdt">Harrison &amp; Müllensiefen (2017)</a>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span>(<span class="st">"devtools"</span>)) <span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"pmcharrison/mdt"</span>)</a></code></pre></div>
<p>We can demo the test as follows:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">mdt<span class="op">::</span><span class="kw">demo_mdt</span>()</a></code></pre></div>
<p>Now, suppose I want to replace the word ‘Next’ with the word ‘Proceed’. Inspecting the documentation, I see that the dictionary is stored in the object <code>mdt::mdt_dict</code>. I inspect this dictionary:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/View.html">View</a></span>(mdt<span class="op">::</span>mdt_dict<span class="op">$</span><span class="kw"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>())</a></code></pre></div>
<p>and see, after some searching, that the key for the ‘Next’ button is <code>AMDI_0016_I_0001_1</code>.</p>
<p>(Note: If you get the error “attempt to apply non-function”, you probably have an outdated version of <code>psychTestR</code> or <code>mdt</code> - reinstalling these packages should fix the problem.)</p>
<p>I then edit the dictionary as follows:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">mdt<span class="op">::</span>mdt_dict<span class="op">$</span><span class="kw"><a href="https://rdrr.io/r/utils/edit.html">edit</a></span>(<span class="dt">key =</span> <span class="st">"AMDI_0016_I_0001_1"</span>, </a>
<a class="sourceLine" id="cb11-2" data-line-number="2">                   <span class="dt">language =</span> <span class="st">"EN"</span>,</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">                   <span class="dt">new =</span> <span class="st">"Proceed"</span>)</a></code></pre></div>
<p>I can check this worked by asking the dictionary to translate the key:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">mdt<span class="op">::</span>mdt_dict<span class="op">$</span><span class="kw">translate</span>(<span class="dt">key =</span> <span class="st">"AMDI_0016_I_0001_1"</span>, </a>
<a class="sourceLine" id="cb12-2" data-line-number="2">                        <span class="dt">language =</span> <span class="st">"EN"</span>)</a></code></pre></div>
<p>And now, if we run the test, we should see our changes:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">mdt<span class="op">::</span><span class="kw">demo_mdt</span>()</a></code></pre></div>
<p>Note that this edit only persists for the length of your R session: if you restart, it’ll revert to the original.</p>
</div>
<div id="feedback" class="section level2">
<h2 class="hasAnchor">
<a href="#feedback" class="anchor"></a>Feedback</h2>
<p>Have you got feedback about this documentation? Please submit it to the <a href="https://github.com/pmcharrison/psychTestR/issues">issues tracker</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#about">About</a></li>
      <li><a href="#instructions">Instructions</a></li>
      <li><a href="#real-life-example">Real-life example</a></li>
      <li><a href="#feedback">Feedback</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Peter M. C. Harrison.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
